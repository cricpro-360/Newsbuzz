<!DOCTYPE html>
<html>
<head>
  <title>Profile Settings</title>
</head>
<body>
  <h2>Create or Edit Profile</h2>

  <input id="username" placeholder="Username"><br><br>
  <input id="bio" placeholder="Bio"><br><br>
  <input id="profilePic" placeholder="Profile Picture URL"><br><br>

  <button onclick="saveProfile()">Save Profile</button>

  <script>
    const API = 'https://newsbuzz-1.onrender.com';

    function saveProfile() {
      const profile = {
        username: document.getElementById("username").value,
        bio: document.getElementById("bio").value,
        profilePic: document.getElementById("profilePic").value
      };

      fetch(`${API}/profile`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(profile)
      })
      .then(res => res.json())
      .then(data => {
        localStorage.setItem("userProfile", JSON.stringify(data));
        alert("Profile saved successfully!");
      });
    }

    window.onload = () => {
      const profile = JSON.parse(localStorage.getItem("userProfile"));
      if (profile) {
        document.getElementById("username").value = profile.username;
        document.getElementById("bio").value = profile.bio;
        document.getElementById("profilePic").value = profile.profilePic;
      }
    };
  </script>
</body>
</html>
