<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NewsBuzz - Firebase News App</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
  <style>
    body { font-family: Arial; margin: 20px; }
    input, textarea, select, button { width: 100%; padding: 10px; margin: 10px 0; }
    .post { border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 8px; }
    .post img { max-width: 100%; height: auto; border-radius: 4px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h2>Post News Article</h2>
  <input type="text" id="title" placeholder="Title" />
  <textarea id="content" rows="4" placeholder="Write your article..."></textarea>
  <input type="file" id="image" accept="image/*" />
  <select id="category">
    <option value="">Select Category</option>
    <option value="Politics">Politics</option>
    <option value="Cricket">Cricket</option>
    <option value="Education">Education</option>
    <option value="Local">Local</option>
  </select>
  <input type="text" id="location" placeholder="Enter Location" />
  <button onclick="publishArticle()">Publish</button>  <hr />
  <h2>All Articles</h2>
  <div id="posts"></div>  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAOKId3KoyBb1DWPy1AkK2P2XVTv60DY6s",
      authDomain: "newsbuzz-62b2b.firebaseapp.com",
      projectId: "newsbuzz-62b2b",
      storageBucket: "newsbuzz-62b2b.appspot.com",
      messagingSenderId: "1049493752379",
      appId: "1:1049493752379:web:41b3bbde3b807a443a2a1e",
      databaseURL: "https://newsbuzz-62b2b-default-rtdb.firebaseio.com"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const storage = firebase.storage();

    function publishArticle() {
      const title = document.getElementById("title").value;
      const content = document.getElementById("content").value;
      const category = document.getElementById("category").value;
      const location = document.getElementById("location").value;
      const imageFile = document.getElementById("image").files[0];

      if (!title || !content || !category || !location || !imageFile) {
        alert("Please fill all fields and select an image.");
        return;
      }

      const postId = db.ref().child("posts").push().key;
      const imageRef = storage.ref().child(`images/${postId}_${imageFile.name}`);

      imageRef.put(imageFile).then(snapshot => {
        snapshot.ref.getDownloadURL().then(imageUrl => {
          const postData = {
            title,
            content,
            category,
            location,
            imageUrl,
            date: new Date().toISOString()
          };
          db.ref("posts/" + postId).set(postData);
          alert("Article published!");
          document.getElementById("title").value = "";
          document.getElementById("content").value = "";
          document.getElementById("category").value = "";
          document.getElementById("location").value = "";
          document.getElementById("image").value = null;
        });
      });
    }

    function loadArticles() {
      db.ref("posts").on("value", snapshot => {
        const posts = snapshot.val();
        const postContainer = document.getElementById("posts");
        postContainer.innerHTML = "";
        for (let id in posts) {
          const post = posts[id];
          postContainer.innerHTML += `
            <div class="post">
              <img src="${post.imageUrl}" alt="image" />
              <h3>${post.title}</h3>
              <p><strong>Category:</strong> ${post.category} | <strong>Location:</strong> ${post.location}</p>
              <p>${post.content}</p>
              <small>Posted on ${new Date(post.date).toLocaleString()}</small>
            </div>
          `;
        }
      });
    }

    loadArticles();
  </script>
</body>
</html>
